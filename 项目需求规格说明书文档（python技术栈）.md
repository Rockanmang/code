# 项目需求规格说明书文档（python技术栈）

版本：1.0 日期：2025 年 5 月 21 日

## **1. 引言**

### **1.1 目的**

本文档详细说明了人工智能驱动的协同文献管理系统的功能和非功能需求。其目的是向所有相关方（包括开发人员、测试人员和项目经理）全面介绍该系统，作为项目设计、开发和测试阶段的基础文档。

### **1.2 范围**

本系统旨在提供一个带有原生人工智能模块的共享文献管理数据库，促进高校研究团队的在线学术交流。初期范围重点开发支持用户管理、研究小组管理、文献管理、协作功能和人工智能助手的功能原型，主要面向高校研究团队。

### **1.3 定义、首字母缩写词和缩略语**

- AI：人工智能
- SRS：软件需求规格说明书
- UI：用户界面
- PDF：便携式文档格式
- Word：微软 Word 文档格式
- RAG：检索增强生成
- LLM：大型语言模型
- API：应用程序编程接口
- JWT：JSON Web 令牌
- CI/CD：持续集成 / 持续部署
- E2E：端到端
- SSR：服务器端渲染
- SEO：搜索引擎优化

### **1.4 参考文献**

- 用户故事文档：人工智能驱动的协同文献管理系统，版本 1.0，2025 年 5 月 20 日
- 项目需求文档（来源 60-71）

## **2. 总体描述**

### **2.1 产品视角**

本系统是一款独立应用程序，旨在满足研究小组的学术交流需求。它将现有笔记和文献管理工具的功能与人工智能功能集成，以增强协作和文献理解。该系统将成为研究团队管理和讨论学术文献的中央在线平台。

### **2.2 产品功能**

系统将提供以下核心功能：

- 用户管理：注册、登录和个人资料管理。
- 研究小组管理：创建、加入和退出研究小组，小组创建者具备管理能力。
- 文献管理：上传、下载和查看文献文件（PDF、Word），对上传的文档进行人工智能解析和标记。
- 协作功能：实时文献注释和带成员标记的讨论。
- 人工智能助手：基于文献内容的文本问答、跨文献关联和相关文献推荐的对话式人工智能。

### **2.3 用户特征**

主要用户是 “课题组成员”，这些人通常是从事科学研究的大学生或研究人员，他们需要工具来阅读、查找、组织和与同行讨论学术文献，预计他们熟悉基本的计算机操作和在线协作工具。

### **2.4 一般约束**

- 技术栈：系统将遵循指定的技术栈，包括前端的 Next.js 14、后端的 FastAPI 以及用于人工智能组件的 LangChain 和 OpenAI API。
- 平台兼容性：Web 应用程序将兼容 Chrome、Firefox 和 Safari 浏览器。
- 部署环境：前端部署在 Vercel 上，后端部署在 Render 上。

### **2.5 假设和依赖**

- 人工智能功能依赖 OpenAI API 的可用性。
- 在线功能依赖可靠的互联网连接。
- 用户具备基本的计算机知识和熟悉 Web 应用程序。

## **3. 具体要求**

### **3.1 功能需求**

### **3.1.1 用户系统模块（FR-US）**

FR-US-001：账户注册

- 描述：系统应允许新用户注册账户。
- 输入：用户名、手机号码、密码、确认密码。
- 处理：
    - 验证手机号码是否唯一且未注册。
    - 对密码进行 SHA-256 加密。
    - 将用户凭证存储在数据库中。
- 输出：
    - 注册成功：重定向到应用程序的主界面，默认在左侧目录栏显示 “私人文献库”。
    - 注册失败（手机号码已注册）：显示 “该手机号已注册”。

FR-US-002：账户登录

- 描述：系统应允许注册用户登录其账户。
- 输入：已注册的手机号码、密码。
- 处理：根据存储的凭证验证手机号码和密码。
- 输出：
    - 登录成功：重定向到应用程序的主界面。
    - 登录失败：显示 “手机号或密码错误”。

FR-US-003：个人资料访问

- 描述：系统应允许用户查看和管理其个人资料信息。
- 输入：点击顶部导航栏中的 “用户名” 按钮。
- 处理：
    - 检索用户的基本信息（用户名、真实姓名、所属研究小组）。
    - 检查研究小组归属情况。
- 输出：
    - 显示个人资料页面。
    - 显示用户基本信息。
    - 若没有研究小组，显示 “暂无课题组”。
    - 显示 “创建课题组”、“加入课题组” 和 “退出课题组” 按钮。

### **3.1.2 研究小组管理模块（FR-GM）**

FR-GM-001：研究小组创建

- 描述：系统应允许用户创建新的研究小组。
- 输入：点击 “创建课题组” 按钮，输入研究小组名称、所属机构、小组描述、研究领域、自定义邀请码。
- 处理：
    - 生成唯一的研究小组 ID。
    - 存储研究小组详细信息，并默认将创建者分配为管理员。
- 输出：
    - 重定向到研究小组管理界面。
    - 突出显示研究小组名称和 ID。
    - 初始显示 “暂无成员”。
    - 在主页左侧目录栏中添加 “公有文献库（研究小组名称）”。

FR-GM-002：研究小组加入

- 描述：系统应允许用户加入现有研究小组。
- 输入：点击 “加入课题组” 按钮，输入研究小组 ID、邀请码。
- 处理：
    - 验证提供的研究小组 ID 和邀请码。
    - 检查用户是否已经是该小组的成员。
    - 更新用户资料中的研究小组归属信息。
    - 同步公共文献库。
- 输出：
    - 加入成功：显示 “您已成功加入该课题组”，更新个人资料，同步 “公有文献库”。
    - 加入失败（ID 或邀请码错误）：显示 “ID 或邀请码错误”。
    - 已经是成员：显示 “您已加入该课题组，请勿重复添加”。

FR-GM-003：研究小组退出

- 描述：系统应允许成员退出研究小组。
- 输入：点击 “退出课题组” 按钮。
- 处理：显示确认弹出窗口：“你确定退出 XXX 课题组吗？”，有 “是” 和 “否” 选项。
- 输出：
    - 点击 “是”：更新个人资料，从主页左侧目录栏中移除 “公有文献库（研究小组名称）”。
    - 点击 “否”：返回上一页。

### **3.1.3 文献管理模块（FR-LM）**

FR-LM-001：文献上传

- 描述：系统应允许用户将文献文件上传到其私人或公共图书馆。
- 输入：在所需图书馆中点击 “上传” 按钮，选择 PDF/Word 文件。
- 处理：
    - 支持 PDF 和 Word 文件类型。
    - 人工智能自动从文档中解析标题、作者、摘要。
    - 人工智能应用智能标签。
    - 将文档存储在所选目录中。
- 输出：
    - 文档存储在当前目录中。
    - 对于公共图书馆更新，在目录中的新文档旁边显示红点通知。

FR-LM-002：文献查看

- 描述：系统应允许用户在线查看上传的文献文件。
- 输入：点击打开目录，然后双击文献名称。
- 处理：
    - 在在线阅读器中打开文档。
    - 在线阅读器支持突出显示、缩放和跳转到目录部分。
    - 在文献页面右侧显示评论部分。
- 输出：在线阅读器显示具有指定功能和评论部分的文档。

### **3.1.4 协作功能模块（FR-CF）**

FR-CF-001：文献注释

- 描述：系统应允许用户向文献文档的特定部分添加注释。
- 输入：选择段落或句子，点击 “批注”，输入内容，可选择 “@成员”。
- 处理：
    - 保存与所选文本关联的注释内容。
    - 检测 “@成员” 提及并识别目标成员。
    - 实时将注释同步到公共图书馆。
    - 为被提及的成员生成系统通知。
- 输出：
    - 注释显示在文献页面上。
    - 被提及的成员收到系统通知。

### **3.1.5 人工智能助手模块（FR-AI）**

FR-AI-001：人工智能助手激活

- 描述：系统应提供一种可访问的方式来激活人工智能助手。
- 输入：点击右下角的浮动球体图标。
- 处理：在当前屏幕上覆盖人工智能助手界面。
- 输出：
    - 显示人工智能助手界面，显示可扩展的对话框（占据屏幕的 1/4）。
    - 显示预设问题（例如 “总结核心论点”、“关联文献推荐”）。

FR-AI-002：人工智能问答

- 描述：系统应允许用户向人工智能助手询问有关当前文献的问题。
- 输入：输入问题或点击预设问题。
- 处理：
    - 人工智能助手使用 RAG 技术基于上下文和文献内容处理查询。
    - 支持多轮对话。
    - 在答案中识别并包含引用来源。
- 输出：人工智能助手提供带有引用来源的相关答案。

FR-AI-003：人工智能跨文献关联

- 描述：系统应提供人工智能驱动的相关文献推荐。
- 输入：点击 “关联文献” 按钮。
- 处理：
    - 人工智能分析当前文档。
    - 人工智能根据内容和引用关系从图书馆中匹配相关文献。
    - 人工智能解释关联原因（例如 “相似研究方法”、“引用关系”）。
- 输出：
    - 人工智能助手生成推荐的相关文献列表。
    - 显示关联原因。
    - 推荐的文献条目可点击直接查看。

### **3.2 非功能需求**

### **3.2.1 性能需求**

- 响应时间：在 90% 的用户场景中，页面加载时间应小于或等于 2 秒。
- 并发性：系统应支持 500 个并发用户同时访问。

### **3.2.2 安全需求**

- 数据加密：用户密码应使用 SHA-256 加密存储。
- 访问控制：系统应实施基于角色的访问控制（管理员 / 普通用户）。
- 身份验证：系统应对 API 使用基于 JWT 的身份验证。

### **3.2.3 兼容性需求**

- 设备支持：Web 应用程序应兼容 Chrome、Firefox 和 Safari 浏览器。
- 屏幕适配：应用程序应实现针对桌面屏幕的响应式设计。

### **3.2.4 其他需求**

- 国际化：系统应支持中文和英语切换，并为未来扩展其他语言做好准备。
- 可维护性：系统架构和代码应具有良好的文档记录和模块化，以方便未来的维护和增强。
- 可测试性：系统的设计应允许进行全面的测试（单元测试、集成测试、端到端测试）。

## **4. 系统架构**

### **4.1 前端技术栈**

- 框架：Next.js 14（应用路由器），用于服务器端渲染（SSR）和 React 生态系统集成。
- 人工智能组件集成：Vercel v0（AI SDK），用于人工智能应用前端工具包。
- 用户界面库：Shadcn/ui + TailwindCSS，用于现代、可自定义的组件。
- 状态管理：Zustand，用于轻量级状态管理。
- 富文本编辑器 / 注释：Tiptap，用于专业文献注释。

### **4.2 后端技术栈**

- 框架：FastAPI，用于高性能、易于学习的异步 API 服务。
- API 规范：Swagger/OpenAPI，用于自动生成 API 文档。
- 身份验证：FastAPI Security / JWT，用于基于 JWT 的身份验证。
- 文件处理：python-multipart 用于文件上传解析，PyPDF2 用于 PDF 文本提取。

### **4.3 人工智能技术栈**

- 大型语言模型核心：LangChain + OpenAI API，用于构建 RAG 管道。
- 向量数据库：Pinecone/Weaviate，用于语义文献检索。
- 嵌入模型：text-embedding-3-small，用于低成本、高精度的嵌入。
- 缓存优化：Redis，用于向量缓存以减少大型语言模型 API 调用。

### **4.4 基础设施**

- 部署平台：Vercel 用于前端部署，Render 用于后端部署，支持自动持续集成 / 持续部署和最小化操作。
- 容器化：Docker Compose，用于本地开发环境的一致性。
- 监控：Sentry + Prometheus，用于全栈错误跟踪。
- 测试：Playwright 用于端到端（E2E）测试，Pytest 用于单元测试，确保全面的测试覆盖。

## **5. 未来增强功能**

- 与其他第三方服务集成。
- 支持中文和英语以外的其他语言。
- 高级小组管理功能（例如角色自定义、细粒度权限）。
- 增强的人工智能功能（例如多个文档的自动总结、趋势分析）。